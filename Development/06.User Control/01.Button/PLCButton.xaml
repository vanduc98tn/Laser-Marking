<UserControl x:Class="Development.PLCButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Development"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             x:Name="userControlAlternativev">
    <UserControl.Resources>
        <Style x:Key="ThreeDButtonStyle" TargetType="Button">
            <Setter Property="Margin" Value="1,2,1,2"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="DemiBold"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="Gray" BorderThickness="1" CornerRadius="5">
                                <Border.Effect>
                                    <DropShadowEffect Color="Black" Direction="320" ShadowDepth="4" Opacity="0.5"/>
                                </Border.Effect>
                                <Border.Triggers>
                                    <EventTrigger RoutedEvent="Border.MouseEnter">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                             To="#F0F0F0" Duration="0:0:0.1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="Border.MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                             To="{TemplateBinding Background}" Duration="0:0:0.1" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Border.Triggers>
                            </Border>
                            <Border Background="{TemplateBinding Background}" Margin="1" CornerRadius="5" Opacity="0.6">
                                <Border.Effect>
                                    <DropShadowEffect Color="White" Direction="160" ShadowDepth="2" Opacity="0.5"/>
                                </Border.Effect>
                            </Border>
                            <ContentPresenter 
                                HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                Margin="{Binding Padding, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Direction="320" ShadowDepth="2" Opacity="0.5"/>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Grid>
        <Image x:Name="img"
            Stretch="Fill" Source="{Binding ImageSource, ElementName=userControlAlternative}" />
        <Button x:Name="btn"
            Content="{Binding Content, ElementName=userControlAlternative}"
            Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
            BorderThickness="{Binding BorderThickness, RelativeSource={RelativeSource AncestorType=UserControl}}"
            FontSize="{Binding FontSize, RelativeSource={RelativeSource AncestorType=UserControl}}"
            Tag="{Binding Tag, RelativeSource={RelativeSource AncestorType=UserControl}}"
            Click="Button_Click" IsManipulationEnabled="True" TouchDown="Button_TouchDown"
            Style="{StaticResource ThreeDButtonStyle}"
            PreviewTouchDown="Button_PreviewTouchDown"
            PreviewTouchUp="Button_PreviewTouchUp"
            LostTouchCapture="Button_LostTouchCapture"
            PreviewMouseDown="Button_PreviewMouseDown"
            PreviewMouseMove="Button_PreviewMouseMove"
            PreviewMouseUp="Button_PreviewMouseUp">
            <Button.Background>
                <SolidColorBrush Color="{Binding Background, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
            </Button.Background>
        </Button>
    </Grid>

</UserControl>
